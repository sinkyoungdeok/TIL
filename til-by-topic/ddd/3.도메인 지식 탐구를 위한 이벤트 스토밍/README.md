### 강의 링크 
- https://www.youtube.com/watch?v=hUcpv5fdCIk

### DDD 
- 실제 코드로 구현 가능한 현실성 있는 도메인 모델 분석과 그것을 추상화하는 설계
- 도메인 모델의 적용 범위를 구현까지 확장하여 도메인 지식을 구현 코드에 반영한다.

### DDD 입문 시 궁금한 점들
- 바운디드 컨텍스트를 나누는 기준 
- 애그리게잇을 도출하는 방법
- DDD를 도입하기 시작 방법

### DDD 도입이 어려운 요소들
- 도메인에 관심이 없는 동료 개발자
- 기술에만 집착하는 동료 개발자
- 동일한 개념에 대해 다른 용어를 사용하거나, 다른 개념에 대해 동일한 용어를 사용
- 하나의 기능을 개발하기 위해 동료 A에게도 물어보고 동료 B에게도 물어봐야 한다.

### 이벤트 스토밍 
- 복잡한 비즈니스 도메인을 빠르게 탐색하고 학습할 수 있는 워크숍 
- 도메인 전문가와 개발자를 학습 과정에 참여시키기 위한 빠른 설계
- 코드를 없애고 모든 사람을 동일한 수준으로 만드는 시각적 접근 방법 

### 진행 방법 
- 벽에 커다란 종이를 붙여 놓고 그 위에 포스트잇을 붙여 나감
- 모든 사람의 생각을 허용하고 존중 
- 비즈니스 프로세스를 이해하는 데에 초점을 맞춘다.

### 1단계: 혼란스러운 탐험
- 각자가 알고 있는 도메인 이벤트를 작성한다.
- 각자가 작성한 이벤트를 봐도 되지만, 토론을 시작하지 말고 자신이 옳다고 생각하는 방식으로 기록한다.

<details><summary> 도메인 이벤트 - 주황색 </summary>

- 도메인 전문가가 관심이 있는 어떤 사건 
- 이름은 과거에 일어났던 일을 표현하므로 과거 시제를 사용한다.
- 이벤트가 발생한다는 것은 상태가 변경되었다는 것을 의미한다.
- 예시
  - 거래가 생성되었다.
  - 거래가 성공하였다.
  - 수강생이 등록되었다.
  - 강의가 생성되었다.
  - 결제 시도가 생성되었다.
  - 주문이 생성되었다.
  - 결제 시도가 실패하였다.

</details>

### 2단계: 타임라인 적용
- 모든 도메인 이벤트를 올바른 타임라인으로 정렬하고 중복되는 이벤트를 제거한다.
- 시간은 왼쪽에서 오른쪽으로 흐르고, 위에서 아래로 평행한 시간을 표현할 수 있다.

<img width="787" alt="image" src="https://user-images.githubusercontent.com/28394879/157393467-f044142d-e749-4103-aa97-dcce117ab739.png">

<details><summary> 핫 스폿 - 자주색 </summary>

- 2단계에서 발생한 갈등을 시각화하고 캡처하는데 사용
- 당장 토론을 하지 않고, 나중에 문제가 해결되면 제거한다.

<img width="908" alt="image" src="https://user-images.githubusercontent.com/28394879/157394057-a24b4cf8-9449-401e-837a-c67af8f7b341.png">

</details>

<details><summary> 엑터와 시스템 - 노란색과 분홍색 </summary>

- 노란색: 단순한 사용자 또는 고객 보다 구체적인 페르소나를 설정한다.
- 분홍색: 외부 시스템부터 일부 레거시 및 마이크로서비스에 이르기까지 책임을 전가할 수 있는 모든 것

<img width="1160" alt="image" src="https://user-images.githubusercontent.com/28394879/157394443-ce8ef827-cf9e-4c8a-add4-c276a91b6dad.png">

</details>

<details><summary> 바운디드 컨텍스트 </summary>

- 2단계에서 발생한 갈등을 해결하다 보면, 생기는 것이다.
- 같은 용어인데 의미가 다르고, 같은 대상이라도 지칭하는 용어가 다를 수 있다.
- 명백한 언어 불일치는 동일한 프로세스 내에서 여러 개의 바운디드 컨텍스트를 나타내는 지표이다. 
- 바운디드 컨텍스트내에서 정의되는 용어를 유비쿼터스 언어라고 한다. 
- 용어 사전: 유비쿼터스 언어를 사용하도록 묶을 수 있는 장치
- 바운디드 컨텍스트의 예시 (강의)
  - 어떤 컨텍스트에서는 강의 컨텐츠를 의미
  - 어떤 컨텍스트에서는 미션을 의미 
  - 어떤 컨텍스트에서는 상품을 의미

</details>

<details><summary> 커맨드 또는 액션 - 파란색 </summary>

- 바운디드 컨텍스트까지 나눈 후에는, 실제 프로세스가 어떻게 이루어지는지 찾아봐야 하는데, 그때 커맨드 또는 액션을 만든다.
- 시스템에서 일어나는 일 
- 도메인 이벤트가 발생하는 원인
- 커맨드 예시: 강의를 구매한다.

</details>

<details><summary> 리드 모델 또는 정보 - 초록색 </summary>

- 액터가 커맨드하는 데에 도움이 되는 정보를 적는다.
- 즉, 결정을 내리는 데 필요한 정보 
- 리드 모델 예시 (수강신청)
  - 강의이름
  - 기간
  - 수강자 
  - 수강료
  - 모집상태 등

</details>

<details><summary> 정책 - 연보라색 </summary>

- "~할 때 마다" 라는 단어로 시작한다.
- 도메인 이벤트와 커맨드 사이에 위치한다. 
- 정책 예시 (수강생 등록)
  - 수강생이 등록 될 때 마다 수강 신청 성공 메일을 발송한다.
  - 수강생 등록 성공 - 주황색(도메인 이벤트)
  - 환영 정책 - 연보라색(정책)
  - 성공 메일을 발송한다 - 파란색(커맨드 또는 액션)

<img width="819" alt="image" src="https://user-images.githubusercontent.com/28394879/157397585-f7046744-e696-4913-bf77-abfe19167196.png">

</details>

### 지금까지 진행한 예시 
<img width="1395" alt="image" src="https://user-images.githubusercontent.com/28394879/157398047-12547790-ff53-4767-a169-40565df07d5b.png">

<details><summary> 애그리게잇 또는 비즈니스 규칙 - 연노란색 </summary>

- 시스템이 기대하는 책임을 수행하며 트랜잭션 일관성을 유지하는 단위
- 일관성은 항상 참이어야 하는 속성을 유지함으로써 달성된다. 
- 실제로 주어진 클래스들의 계약을 정의하는 방법이며, 내부의 구현은 자유롭게 하면 된다.
- 개발자가 아닌 사람에게 애그리게잇 용어를 강요하면 안되고, 비즈니스 규칙으로 부를 수 있도록 한다.
- 예시 (장바구니)
  - 장바구니의 합계는 상품 수량의 해당 단가를 곱한 값이어야 한다.
  - 상품을 추가하거나 제거하더라도 불변식이 깨져서는 안된다.

- 수강 신청과 결제에 대한 예시
<img width="1395" alt="image" src="https://user-images.githubusercontent.com/28394879/157399050-da08ff9c-4340-44c6-8e67-28935cd239ec.png">
  - 강의를 듣는 수강생의 수는 항상 정원을 넘을 수 없다.
  - 한번에 결제 시도는 시도중, 결제 성공, 결제 실패 중 하나의 상태만 가지고 있어야 한다.
  - 환불 금액은 전체 결제 금액보다 클 수 없다. 

</details>


